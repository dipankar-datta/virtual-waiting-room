(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,c){},26:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),s=c(20),a=c.n(s),i=(c(26),c(9)),o=c(10),h=c(12),l=c(11),j=(c(16),c(2)),d=c(1),b=function(e){Object(h.a)(c,e);var t=Object(l.a)(c);function c(){return Object(i.a)(this,c),t.apply(this,arguments)}return Object(o.a)(c,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"horizontal-center",children:Object(d.jsx)("h2",{})})}}]),c}(n.a.Component),u=c(7),O=function(e){Object(h.a)(c,e);var t=Object(l.a)(c);function c(e){var r;return Object(i.a)(this,c),(r=t.call(this,e)).STRESS_CHECK_PATH="/api/can_serve",r.RECHECK_PERIOD=5,r.intervalRef=void 0,r.redirectBack=function(){r.state.redirectUrl&&(clearInterval(r.intervalRef),window.location.replace(r.state.redirectUrl))},r.checkApplicationStressStatus=function(){if(r.state.recheckPeriod>0)r.setState(Object(u.a)(Object(u.a)({},r.state),{},{recheckPeriod:r.state.recheckPeriod-1}));else if(0===r.state.recheckPeriod){var e=r.state.redirectHostname+r.STRESS_CHECK_PATH;fetch(e).then((function(e){e.json().then((function(e){e?(clearInterval(r.intervalRef),r.redirectBack()):r.setErrorMessage("BUSY")}))})).catch((function(e){r.setErrorMessage("FAILED")}))}},r.setErrorMessage=function(e){var t=Object.assign([],r.state.recheckMessages),c="Last checked at: "+(new Date).toLocaleTimeString()+" - Status: "+e;t.push(c),r.setState(Object(u.a)(Object(u.a)({},r.state),{},{recheckMessages:t,recheckPeriod:r.RECHECK_PERIOD}))},r.stopRecheck=function(){clearInterval(r.intervalRef),r.setState(Object(u.a)(Object(u.a)({},r.state),{},{rechecking:!1}))},r.startRecheck=function(){r.intervalRef=setInterval(r.checkApplicationStressStatus,1e3),r.setState(Object(u.a)(Object(u.a)({},r.state),{},{rechecking:!0,recheckPeriod:r.RECHECK_PERIOD}))},r.state={recheckPeriod:r.RECHECK_PERIOD,recheckMessages:[],rechecking:!0},r}return Object(o.a)(c,[{key:"componentDidMount",value:function(){var e=new URLSearchParams(this.props.location.search).get("redirectInfo");e&&(e=atob(e),e=JSON.parse(e));var t=e.redirectUrl,c=new URL(t).origin;this.setState(Object(u.a)(Object(u.a)({},this.state),{},{redirectUrl:t,redirectHostname:c})),this.startRecheck()}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Resource Busy"}),Object(d.jsx)("p",{children:"Your requested application is currently busy. Once the requested application is available, you will be redirected back."})]}),Object(d.jsxs)("h6",{children:["Requested application URL: ",this.state.redirectUrl]}),Object(d.jsxs)("div",{className:"horizontal-center",style:{padding:"20px"},children:[Object(d.jsxs)("div",{className:"horizontal-center",children:[Object(d.jsx)("button",{type:"button",className:"btn btn-danger",onClick:this.redirectBack,children:"Go Back"})," \xa0\xa0",this.state.rechecking?Object(d.jsx)("button",{type:"button",className:"btn btn-danger",onClick:this.stopRecheck,children:"Stop Recheck"}):Object(d.jsx)("button",{type:"button",className:"btn btn-danger",onClick:this.startRecheck,children:"Start Recheck"})]}),Object(d.jsx)("div",{className:"horizontal-center",children:Object(d.jsx)("h6",{children:"Only for demonstration"})})]}),this.state.rechecking?Object(d.jsxs)("h6",{children:["Next Application status check in - ",this.state.recheckPeriod," seconds"]}):"",this.state.recheckMessages.length>0?Object(d.jsx)("table",{children:Object(d.jsx)("tbody",{children:this.state.recheckMessages.slice().reverse().map((function(t,c){return Object(d.jsxs)("tr",{children:[e.state.recheckMessages.length-c," - ",t]})}))})}):""]})}}]),c}(n.a.Component),p=function(e){Object(h.a)(c,e);var t=Object(l.a)(c);function c(){return Object(i.a)(this,c),t.apply(this,arguments)}return Object(o.a)(c,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{style:{backgroundColor:"black",height:"55px"},children:Object(d.jsx)("div",{className:"horizontal-center",children:Object(d.jsx)("h3",{style:{color:"cornsilk",marginTop:"10px"},children:"Virtual Waiting Room"})})}),Object(d.jsx)("div",{style:{padding:"20px 20px"},children:Object(d.jsxs)(j.c,{children:[Object(d.jsx)(j.a,{path:"/",exact:!0,component:b}),Object(d.jsx)(j.a,{path:"/wait",component:O})]})})]})}}]),c}(n.a.Component),k=c(17);a.a.render(Object(d.jsx)(k.a,{children:Object(d.jsx)(p,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.51b6a8aa.chunk.js.map